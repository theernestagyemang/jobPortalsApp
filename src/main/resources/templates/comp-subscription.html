<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Jobs, L'aine Jogs" name="keywords"/>
    <meta content="Synergy OSL" name="author"/>
    <meta content="" name="robots"/>
    <meta content="xjobs -  Job Portal" name="description"/>
    <meta content="xjobs -  Job Portal" property="og:title"/>
    <meta content="xjobs -  Job Portal" property="og:description"/>
    <meta content="xjobs -  Job Portal" property="og:image"/>
    <meta content="telephone=no" name="format-detection">

    <!-- FAVICONS ICON -->
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon"/>

    <!-- PAGE TITLE HERE -->
    <title>Packages | xjobs </title>

    <!-- MOBILE SPECIFIC -->
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Styles -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" rel="stylesheet">
    <link href="/css/job/bootstrap-grid.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/icons.css" rel="stylesheet">
    <link href="/css/job/animate.min.css" rel="stylesheet">
    <link href="/css/job/style.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/responsive.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/chosen.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/colors/colors.css" rel="stylesheet" type="text/css"/>


    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link class="skin" href="/css/sweet-alert.min.css" rel="stylesheet" type="text/css"/>

</head>
<body>

<div class="page-loading">
    <img alt="" src="/images/loader.jpg"/>
    <span>Skip Loader</span>
</div>

<div class="theme-layout" id="scrollup">

    <div th:insert="menu-employer :: header"></div>

    <section class="overlape">
        <div class="block no-padding">
            <div class="parallax scrolly-invisible no-parallax lozad" data-src="/images/bnr1.jpg"
                 data-velocity="-.1"
                 style="background:  repeat scroll 50% 422.28px transparent;"></div><!-- PARALLAX BACKGROUND IMAGE -->
            <div class="container fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="inner-header">
                            <h3 th:if="${user != null}" th:text="'Welcome ' + ${user.fullName}">Welcome </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="block no-padding">
            <div class="container">
                <div class="row no-gape">
                    <aside class="col-lg-3 column border-right">
                        <div class="widget">
                            <div class="tree_widget-sec" id="menus">
                                Menus Here
                            </div>
                        </div>
                    </aside>
                    <div class="col-lg-9 column">
                        <div class="padding-left">
                            <div class="manage-jobs-sec">
                                <h3>Packages/Subscription</h3>
                                <input id="seekerId" th:value="${employer.id}" type="hidden"/>

                                <table class="pkges-table">
                                    <thead>
                                    <tr>
                                        <td>Transaction ID</td>
                                        <td>Package</td>
                                        <td>Total CVs</td>
                                        <td>Used</td>
                                        <td>Remaining</td>

                                    </tr>
                                    </thead>
                                    <tbody>

                                    <tr th:each="country: ${list}">
                                        <td><span th:text="${country.id}">221319456</span></td>

                                        <td>
                                            <div class="table-list-title">
                                                <h3><a href="#" th:text="${country.packageName}" title="">Supper
                                                    Jobs</a></h3>
                                            </div>
                                        </td>

                                        <td><span
                                                th:text="${#numbers.formatInteger(country.totalCv,0,'POINT')}">0</span>
                                        </td>

                                        <td><span th:text="${#numbers.formatInteger(country.used,0,'POINT')}">0</span>
                                        </td>

                                        <td>
                                            <span th:text="${#numbers.formatInteger(country.remaining,0,'POINT')}">0</span>
                                            <a class="btn btn-danger btn-sm pull-right"
                                               href="/subscription-list" th:hidden="${country.remaining !=0}"> Buy
                                                Subscription</a>
                                        </td>


                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer" style="margin-top:40px">
        <div th:insert="footer-1 :: footer"></div>
    </footer>

</div>

<div aria-hidden="true" aria-labelledby="deleteLabel" class="modal fade " id="basicSubModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog">
        <form id="paymentForm">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="deleteLabel"> Subscription</h4>
                </div>
                <div class="modal-body">
                    <p>Please review your invoice and click on Pay Now to make payment.</p>

                    <div class="material-datatables" id="printTable">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-12">


                                    <div class="pull-left m-t-30">
                                        <address>
                                            <strong>L'aine Services Limted</strong><br/>
                                            Adabraka-Accra<br/>
                                            <b>APPLICANT DETAILS :</b><br/>
                                            <span id="applicantName">#</span><br/>
                                            <span id="applicantEmail">#</span>
                                        </address>
                                    </div>
                                    <div class="pull-right m-t-30">
                                        <ul>
                                            <li>Invoice Date: <span id="orderDate">Jun 15, 2015</span></li>
                                            <li>Invoice Status: <span class="badge badge-danger"
                                                                      id="status">Pending</span></li>
                                            <li class="m-t-10">Invoice ID:<span id="transactionId">#</span></li>
                                        </ul>

                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table m-t-30">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Description</th>
                                            <th>Amount</th>
                                            <th>COT</th>
                                            <th>Total</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td id="description">Subscription</td>
                                            <td id="amount">2000</td>
                                            <td id="cot">252.50</td>
                                            <td id="ttTotal">2.5</td>
                                        </tr>
                                        </tbody>
                                    </table>


                                </div>
                            </div>
                        </div>
                    </div>


                </div>

                <div class="modal-footer">
                    <button class="btn-success" data-dismiss="modal" type="button">Cancel</button>
                    <a class="btn btn-primary btn-sm print-basic" href="#"><i class="fa fa-print"></i></a>

                    <a class="ttlr_inline" data-amount="1"
                       data-currency="GHS"
                       data-custom_description="Payment for Subscription"
                       data-customer_email="email@customer.com"
                       data-pay_button_text="Pay Now"
                       data-payment_method="both"
                       data-transid="000000000000"
                       id="payBtn"
                       th:data-APIKey="${apiKey}"
                       th:data-redirect_url="${url}">
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
<div aria-hidden="true" aria-labelledby="deleteLabel" class="modal fade modal-bx-info editor" id="basicModal"
     role="dialog"
     tabindex="-1">
    <div class="modal-dialog">
        <form>
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="deleteLabel">Subscription</h4>
                </div>
                <div class="modal-body">
                    <p>You have selected to subscribe to employer package.</p>
                    <p>
                        If this was the action that you wanted to do,
                        please confirm your choice, or cancel and return to the page.
                    </p>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" data-dismiss="modal" type="button">Cancel</button>
                    <button class="btn btn-danger" id="basicConfirm" type="button">Subscribe</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="/js/job/jquery.min.js" type="text/javascript"></script>
<script data-cfasync="false" src="css/job/email-decode.min.js"></script>
<script src="/js/job/modernizr.js" type="text/javascript"></script>
<script src="/js/job/cript.js" type="text/javascript"></script>
<script src="/js/job/bootstrap.min.js" type="text/javascript"></script>
<script src="/js/job/wow.min.js" type="text/javascript"></script>
<script src="/js/job/slick.min.js" type="text/javascript"></script>
<script src="/js/job/parallax.js" type="text/javascript"></script>
<script src="/js/job/select-chosen.js" type="text/javascript"></script>
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script src="/js/job/jquery.scrollbar.min.js" type="text/javascript"></script>
<script src="/js/sweetAlert.js"></script>

<script th:src="@{/js/employer-menus.js}"></script>
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script src="/js/jquery.number.min.js" type="text/javascript"></script>
<script src="https://test.theteller.net/checkout/resource/api/inline/theteller_inline.js"
        type="text/javascript"></script>
<script src="https://js.paystack.co/v1/inline.js"></script>

<script type="text/javascript">
    $(function () {
        $('.lozad').Lazy();
    });
</script>
<script>
    function createTellerPayment(url) {
        $.post(url, function (data, status) { //Declare a GET that takes in href

            var email = data.email;
            var total = data.total;
            var txId = data.orderId;

            $("#status").html(data.paymentStatus);
            $("#transactionId").html(data.orderId);
            $("#amount").html($.number(data.amount, 2));
            $("#cot").html($.number(data.cot, 2));
            $("#ttTotal").html($.number(data.total, 2));
            $("#applicantName").html("Name: " + data.name);
            $("#applicantEmail").html("Email: " + data.email);
            $("#orderDate").html(data.strDate);
            $("#description").html(data.description);

            $("a.ttlr_inline").attr("data-transid", txId);
            $("a.ttlr_inline").attr("data-amount", total);
            $("a.ttlr_inline").attr("data-customer_email", email);


            var modal2 = $('#basicSubModal');
            modal2.modal('show');

        });
    }

    $('a.basic-subsicription').click(function (e) {
        e.preventDefault();
        var modal = $('#basicModal');
        modal.data('url', $(this).attr('href'));
        modal.data('request_type', $(this).data('request-type'));
        modal.modal('show');
    });

    $('a.prof-subsicription').click(function (e) {
        e.preventDefault();
        var modal = $('#professionalModal');
        modal.data('url', $(this).attr('href'));
        modal.data('request_type', $(this).data('request-type'));
        modal.modal('show');
    });

    $('a.extended-subsicription').click(function (e) {
        e.preventDefault();
        var modal = $('#extendedModal');
        modal.data('url', $(this).attr('href'));
        modal.data('request_type', $(this).data('request-type'));
        modal.modal('show');
    });


    $('#basicConfirm').click(function () {

        var modal = $('#basicModal');
        var empId = $("#seekerId").val();
        var basic = "Basic";
        var url = "/create-invoice?sub=" + basic + "&empId=" + empId;

        $("#basicConfirm").prop("disabled", true);

        createTellerPayment(url);

        $("#basicConfirm").prop("disabled", false);
        modal.modal('hide');
    });


    $('#profConfirm').click(function () {

        var modal = $('#professionalModal');
        var empId = $("#seekerId").val();
        var basic = "Professional";
        var url = "/create-invoice?sub=" + basic + "&empId=" + empId;

        $("#profConfirm").prop("disabled", true);
        createTellerPayment(url);

        $("#profConfirm").prop("disabled", false);
        modal.modal('hide');
    });

    $('#extendedConfirm').click(function () {

        var modal = $('#extendedModal');
        var url = modal.data('url');
        $("#extendedConfirm").prop("disabled", true);

        var empId = $("#seekerId").val();
        var basic = "Premium";
        var url = "/create-invoice?sub=" + basic + "&empId=" + empId;

        createTellerPayment(url);

        $("#extendedConfirm").prop("disabled", false);
        modal.modal('hide');
    });
</script>

<script type='text/javascript'>

    function udatePic() {

        var form = $('#picForm')[0];
        var data = new FormData(form);
        var id = $('#seekerId').val();

        data.append(id, id);

        $.ajax({
            type: "POST",
            url: '/update-com-pic?id=' + id,
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,

            success: function (data) {
                location.reload();
            },
            error: function (e) {
                location.reload();
            }

        });
    }


    $('#jobform').submit(function () {
        //stop submit the form, we will post it manually.
        event.preventDefault();


        var jobTitle = $('#jobTitle').val();
        var jobTags = $('#jobTags').val();
        var jobType = $("#jobType option:selected").text();
        var experience = $('#experience').val();
        var category = $('#category').val();
        var renumeration = $('#renumeration').val();
        var toRenumeration = $('#toRenumeration').val();
        var region = $('#region').val();
        var jobCountry = $('#jobCountry').val();
        var city = $('#city').val();

        var howToApply = $('#howToApply').val();
        var jobDescription = $('#jobDescription').val();
        var slot = $('#slot').val();
        var expDate = $('#expDate').val();
        var id = $('#seekerId').val();


        var url = "/create-job?jobTitle=" + jobTitle + "&jobTags=" + jobTags + "&jobType=" + jobType + "&experience=" + experience + "&id=" + id +
            "&category=" + category + "&renumeration=" + renumeration + "&toRenumeration=" + toRenumeration + "&region=" + region +
            "&jobCountry=" + jobCountry + "&city=" + city + "&howToApply=" + howToApply + "&jobDescription=" + jobDescription + "&slot=" + slot + "&expDate=" + expDate;
        // disabled the submit button
        $("#btnSave").prop("disabled", true);
        event.preventDefault();
        $.ajax({
            type: "POST",
            url: url,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,

            success: function (data) {

                swal({
                    title: "Success!",
                    text: "Your profile has been updated successfully!",
                    type: "success",
                    icon: "success",
                    button: "Ok!"
                })
                    .then((value) => {
                        $("#btnSave").prop("disabled", false);
                        location.reload();
                    });

            },
            error: function (e) {
                swal({
                    title: "Unsuccessful!",
                    text: "Sorry, We couldn't update your profile!",
                    type: "error",
                    icon: "danger",
                    button: "Ok!"
                });

                $("#btnSave").prop("disabled", false);

            }

        });

    });
</script>
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-lite.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-lite.min.js"></script>
<script>
    $('#jobDescription').summernote({
        placeholder: 'Please type your message here',
        tabsize: 2,
        height: 120,
        toolbar: [
            ['style', ['style']],
            ['font', ['bold', 'underline', 'clear']],
            ['color', ['color']],
            ['para', ['ul', 'ol', 'paragraph']],
            ['table', ['table']],
            ['insert', ['link', 'picture', 'video']],
            ['view', ['fullscreen', 'codeview', 'help']]
        ]


    });

    function printData() {
        var divToPrint = document.getElementById("printTable");
        newWin = window.open("");
        newWin.document.write(divToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }

    $('a.print-basic').on('click', function () {
        printData();
    })


    function payWithPaystack() {

        var handler = PaystackPop.setup({
            key: 'pk_test_4d7049e8b351933835efd32bc30b80494b494ac6', // Replace with your public key
            email: document.getElementById('email-address').value,
            amount: document.getElementById('amount').value * 100, // the amount value is multiplied by 100 to convert to the lowest currency unit
            currency: 'GHS', // Use GHS for Ghana Cedis or USD for US Dollars
            firstname: document.getElementById('first-name').value,
            lastname: document.getElementById('last-name').value,
            reference: '1589999', // Replace with a reference you generated
            callback: function (response) {
                //this happens after the payment is completed successfully
                var reference = response.reference;
                alert('Payment complete! Reference: ' + reference);
                // Make an AJAX call to your server with the reference to verify the transaction
            },
            onClose: function () {
                alert('Transaction was not completed, window closed.');
            },
        });
        handler.openIframe();
    }

</script>
</body>
</html>
