<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Jobs, L'aine Jogs" name="keywords"/>
    <meta content="Synergy OSL" name="author"/>
    <meta content="" name="robots"/>
    <meta content="xjobs -  Job Portal" name="description"/>
    <meta content="xjobs -  Job Portal" property="og:title"/>
    <meta content="xjobs -  Job Portal" property="og:description"/>
    <meta content="xjobs -  Job Portal" property="og:image"/>
    <meta content="telephone=no" name="format-detection">

    <!-- FAVICONS ICON -->
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon"/>


    <link href="/css/vendors_css.css" rel="stylesheet">
    <link href="/css/style_2.css" rel="stylesheet">
    <link href="/css/skin_color.css" rel="stylesheet">

    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css"
          rel="stylesheet">
    <title>XJobs | Assessment Setup</title>

</head>
<body class="hold-transition light-skin sidebar-mini theme-primary">

<div class="wrapper">
    <div id="loader"></div>
    <div th:insert="dashboard-header :: dashboard-header"></div>


    <!-- Content Wrapper. Contains page content -->
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <div class="container-full">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="d-flex align-items-center">
                    <div class="mr-auto">
                        <h3 class="page-title"> SetUp</h3>

                    </div>

                </div>
            </div>

            <div class="section-full content-inner bg-white contact-style-1">

                <div class="container">
                    <div class="row">
                        <!-- right part start -->
                        <div class="col-lg-4 col-md-6 ">
                            <a class="btn btn-primary m-l15 font-16 text-white" data-target="#profilename"
                               data-toggle="modal" href="#"><i class="fa fa-pencil"></i>Create Address</a>

                            <a class="btn btn-primary m-l15 font-16 text-white" data-target="#socialProfile"
                               data-toggle="modal" href="#"><i class="fa fa-pencil"></i>Social Media URL</a>
                            <br/><br/>

                        </div>
                    </div>
                    <div class="row">
                        <div th:each="user : ${list}" th:remove="tag">
                            <div class="col-lg-4 col-md-6 d-lg-flex d-md-flex">
                                <div class="p-a30 border m-b30 contact-area border-1 align-self-stretch radius-sm">
                                    <h4 class="m-b10">[(${user.location})]</h4>
                                    <p th:text="${user.caption ?:'If you have any questions simply use the following contact details'}">
                                        If you have any questions simply use the following contact details.</p>


                                    <ul class="no-margin">
                                        <li class="icon-bx-wraper left m-b30">
                                            <div class="icon-bx-xs border-1"><a class="icon-cell" href="#"><i
                                                    class="ti-location-pin"></i></a></div>
                                            <div class="icon-content">
                                                <h6 class="text-uppercase m-tb0 dez-tilte">Address:</h6>
                                                <span th:utext="${user.address}"/>
                                            </div>
                                        </li>
                                        <li class="icon-bx-wraper left  m-b30">
                                            <div class="icon-bx-xs border-1"><a class="icon-cell" href="#"><i
                                                    class="ti-email"></i></a></div>
                                            <div class="icon-content">
                                                <h6 class="text-uppercase m-tb0 dez-tilte">Email:</h6>
                                                <p>[(${user.email})]</p>
                                            </div>
                                        </li>
                                        <li class="icon-bx-wraper left">
                                            <div class="icon-bx-xs border-1"><a class="icon-cell" href="#"><i
                                                    class="ti-mobile"></i></a></div>
                                            <div class="icon-content">
                                                <h6 class="text-uppercase m-tb0 dez-tilte">PHONE</h6>
                                                <p>[(${user.phone})]</p>
                                            </div>
                                        </li>


                                    </ul>


                                    <div class="m-t20">
                                        <ul class="dez-social-icon dez-social-icon-lg">
                                            <li><a class="fa fa-facebook bg-primary" target="_blank"
                                                   th:href="${company.facebook}"></a></li>
                                            <li><a class="fa fa-twitter bg-primary" target="_blank"
                                                   th:href="${company.twitter}"></a></li>
                                            <li><a class="fa fa-linkedin bg-primary" target="_blank"
                                                   th:href="${company.linkin}"></a></li>
                                            <li style="display: none"><a class="fa fa-google-plus bg-primary"
                                                                         target="_blank"
                                                                         th:href="${company.google}"></a></li>
                                            <li><a class="fa fa-instagram bg-primary" target="_blank"
                                                   th:href="${company.instagram}"></a></li>
                                        </ul>
                                    </div>

                                    <div class="m-t20">
                                        Edit Address
                                        <ul class="dez-social-icon dez-social-icon-lg">
                                            <li><a class="btn btn-primary edit-action"
                                                   th:href="@{/findAddress/{id}(id=${user.id})}" title="Edit Address"> <i
                                                    class="fa fa-pencil"></i></a></li>
                                            <li><a class="btn btn-danger confirm-action" href="#"
                                                   th:href="@{/deleteAddress/{id}(id=${user.id})}" title="Delete Address">
                                                <i
                                                        class="fa fa-trash"></i></a></li>


                                        </ul>
                                    </div>

                                </div>
                            </div>


                        </div>


                        <!-- Left part END -->
                        <div class="col-lg-4 col-md-12 d-lg-flex m-b30">
                            <div id="map"></div>

                        </div>


                        <div aria-hidden="true" aria-labelledby="ProfilenameModalLongTitle"
                             class="modal fade browse-job modal-bx-info editor" id="profilename"
                             role="dialog" tabindex="-1">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="ProfilenameModalLongTitle">Setup Address</h5>
                                        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <form id="addressSetup">
                                        <div class="modal-body">

                                            <div class="row">
                                                <div class="col-lg-12 col-md-12">
                                                    <div class="form-group">
                                                        <label for="caption">Caption</label>
                                                        <input class="form-control" id="caption"
                                                               maxlength="50" placeholder="Add your caption" type="text">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="location">Location</label>
                                                        <input class="form-control" id="location"
                                                               maxlength="230"
                                                               placeholder="E.g L’AINE Services – Head Office" required
                                                               type="text">
                                                    </div>

                                                    <div class="form-group">
                                                        <label>Address</label>
                                                        <textarea class="form-control" id="address"
                                                                  maxlength="240"
                                                                  placeholder="E.g Plot No. 18 and 19 Ocean View Estates, Community 13, Sakumono"
                                                                  required></textarea>
                                                    </div>


                                                    <div class="form-group">
                                                        <label for="email">Email</label>
                                                        <input class="form-control" id="email" maxlength="100"
                                                               placeholder="Email" required type="email">
                                                    </div>

                                                    <div class="form-group">
                                                        <label for="tel">telephone</label>
                                                        <input class="form-control" id="telephone"
                                                               maxlength="100"
                                                               required title='Phone Number (Format: +99(99)9999-9999)'
                                                               type='tel'>
                                                        <input class="form-control" id="addressId" type="hidden" value="0">

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="modal-footer">

                                            <button class="btn btn-success pull-right" id="btnSaveAddress" type="submit">
                                                Save
                                            </button>
                                            <button class="btn btn-danger pull-right" data-dismiss="modal" type="button">
                                                Cancel
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div aria-hidden="true" aria-labelledby="ProfilenameModalLongTitle"
                             class="modal fade browse-job modal-bx-info editor"
                             id="deleteConfirmModal" role="dialog" tabindex="-1">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="ProfilenameModalLongTitle">Delete Confirmation</h5>
                                        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <div class="modal-body">
                                        <p>You have selected to delete this address.</p>
                                        <p>
                                            If this was the action that you wanted to do,
                                            please confirm your choice, or cancel and return to the page.

                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-success" data-dismiss="modal" type="button">Cancel</button>
                                        <button class="btn btn-danger" id="deleteConfirm" type="button">Delete Address
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div aria-hidden="true" aria-labelledby="ProfilenameModalLongTitle"
                             class="modal fade browse-job modal-bx-info editor"
                             id="socialProfile" role="dialog" tabindex="-1">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="ProfilenameModalLongTitle">Social Media URL Setup</h5>
                                        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <form id="socialSetup">
                                        <div class="modal-body">
                                            <div class="form-group">
                                                <label for="fb">Facebook</label>
                                                <input class="form-control" id="fb" placeholder="Facebook"
                                                       required title='Facebook account url' type="url">
                                            </div>

                                            <div class="form-group">
                                                <label for="twitter">Twitter</label>
                                                <input class="form-control" id="twitter" placeholder="Twitter" required
                                                       title='Twitter' type="url">
                                            </div>

                                            <div class="form-group">
                                                <label for="lkn">LinkedIn</label>
                                                <input class="form-control" id="lkn" placeholder="LinkedIn"
                                                       required title='LinkedIn account url' type="url">
                                            </div>

                                            <div class="form-group" style="display: none">
                                                <label for="lkn">Google Plus</label>
                                                <input class="form-control" id="google" placeholder="Google Plus"
                                                       title='Google Url' type="text">
                                            </div>

                                            <div class="form-group">
                                                <label for="lkn">Instagram</label>
                                                <input class="form-control" id="instag" placeholder="Instagram"
                                                       required title='Instagram Url' type="url">
                                            </div>

                                            <div class="form-group">
                                                <label for="lkn">Google Map</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <input class="form-control" id="latitude" placeholder="Instagram"
                                                               required title='Latitude' type="text">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" id="longitude" placeholder="Instagram"
                                                               required title='Longitude' type="text">
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-success pull-right" id="btnSavSocial" type="submit">
                                                Save
                                            </button>
                                            <button class="btn btn-danger pull-right" data-dismiss="modal" type="button">
                                                Cancel
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.content-wrapper -->

    <div th:insert="dashboard-footer :: dashboard-footer"></div>

    <div th:insert="dashboard-sidebar :: dashboard-sidebar"></div>
    <!-- Control Sidebar -->

<button class="scroltop fa fa-chevron-up"></button>
</div>
<!-- JAVASCRIPT FILES ========================================= -->
<script src="/js/jquery.min.js"></script><!-- JQUERY.MIN JS -->
<script src="/plugins/bootstrap/js/popper.min.js"></script><!-- BOOTSTRAP.MIN JS -->
<script src="/plugins/bootstrap/js/bootstrap.min.js"></script><!-- BOOTSTRAP.MIN JS -->
<script src="/plugins/bootstrap-select/bootstrap-select.min.js"></script><!-- FORM JS -->
<script src="/plugins/bootstrap-touchspin/jquery.bootstrap-touchspin.js"></script><!-- FORM JS -->
<script src="/plugins/magnific-popup/magnific-popup.js"></script><!-- MAGNIFIC POPUP JS -->
<script src="/plugins/counter/waypoints-min.js"></script><!-- WAYPOINTS JS -->
<script src="/plugins/counter/counterup.min.js"></script><!-- COUNTERUP JS -->
<script src="/plugins/imagesloaded/imagesloaded.js"></script><!-- IMAGESLOADED -->
<script src="/plugins/masonry/masonry-3.1.4.js"></script><!-- MASONRY -->
<script src="/plugins/masonry/masonry.filter.js"></script><!-- MASONRY -->
<script src="/plugins/owl-carousel/owl.carousel.js"></script><!-- OWL SLIDER -->
<script src="/js/custom.js"></script><!-- CUSTOM FUCTIONS  -->
<script src="/js/dz.carousel.js"></script><!-- SORTCODE FUCTIONS  -->
<script src='https://www.google.com/recaptcha/api.js'></script> <!-- Google API For Recaptcha  -->
<script src="/js/dz.ajax.js"></script><!-- CONTACT JS  -->
<script src="/js/sweetAlert.js"></script><!-- CONTACT JS  -->
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script src="/js/vendors.min.js"></script>
<script src="../static/assets/icons/feather-icons/feather.min.js"></script>
<!-- Joblly App -->
<script src="/js/template.js"></script>

<script src="../static/assets/vendor_components/datatable/datatables.min.js"></script>
<script src="../static/assets/vendor_components/sweetalert/sweetalert.min.js"></script>
<script src="/js/template.js"></script>
<script src="/js/job/app-globaljs.js"></script>
<script src="../static/assets/vendor_plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.js"></script>
<script src="/js/job/app-rating-manager.js"></script>
<script src="../static/assets/vendor_components/PACE/pace.min.js"></script>
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $('.lozad').Lazy();
    });
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"/>

<script th:inline="javascript">
    /*<![CDATA[*/
    function initMap() {
        // The location of the map
        var shop = {lat: /*[[${company.latitude}]]*/, lng: /*[[${company.longitude}]]*/};
        var map = new google.maps.Map(
            document.getElementById('map'), {zoom: 4, center: shop});
        var marker = new google.maps.Marker({position: shop, map: map});
    }

    /*]]>*/
</script>
<script type='text/javascript'>

    $('.frm').submit(function () {
        //stop submit the form, we will post it manually.
        event.preventDefault();


        var location = $('#location').val();
        var address = $('#address').val();
        var email = $('#email').val();
        var telephone = $('#telephone').val();
        var addressId = parseInt($('#addressId').val());

        var url = "/create-address?location=" + location + "&email=" + email + "&address=" + address + "&telephone=" + telephone + "&strId=" + addressId;

        // disabled the submit button
        $("#btnSave").prop("disabled", true);
        event.preventDefault();
        $.ajax({
            type: "POST",
            url: url,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            success: function (data) {

                swal({
                    title: "Success!",
                    text: "Your message is successfully delivered, We will contact you shortly!",
                    type: "success",
                    icon: "success",
                    button: "Ok!"
                })
                    .then((value) => {
                        $("#btnSave").prop("disabled", false);
                        location.reload();
                    });

            },
            error: function (e) {
                swal({
                    title: "Unsuccessful!",
                    text: "Sorry, We couldn't deliver your message, Try again next time!",
                    type: "error",
                    icon: "error",
                    button: "Ok!"
                });

                $("#btnSave").prop("disabled", false);

            }

        });
        modal.hide();
    });


</script>
<script type='text/javascript'>

    $('#addressSetup').submit(function (e) {
        //stop submit the form, we will post it manually.
        e.preventDefault();
        var modal = $('#profilename');

        var location = $('#location').val();
        var address = $('#address').val();
        var email = $('#email').val();
        var telephone = $('#telephone').val();
        var caption = $('#caption').val();
        var strId = parseInt($('#addressId').val());


        var url = "/create-address?location=" + location + "&email=" + email + "&address=" + address + "&telephone=" + telephone + "&strId=" + strId + "&caption=" + caption;

        // disabled the submit button
        $("#btnSaveAddress").prop("disabled", true);
        event.preventDefault();
        $.ajax({
            type: "POST",
            url: url,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            success: function (data) {
                switch (data) {

                    case "INVALID-STAFF":
                        swal({
                            title: "Unsuccessful!",
                            text: "Sorry, Invalid Staff!",
                            type: "error",
                            icon: "danger",
                            button: "Ok!"
                        });
                        break;

                    case "SUCCESS":
                        swal({
                            title: "Success!",
                            text: "Your address setup is successfully",
                            type: "success",
                            icon: "success",
                            button: "Ok!"
                        })
                            .then((value) => {
                                $("#btnSaveAddress").prop("disabled", false);
                                location.reload();
                            });
                        break;

                    case "FAILED":
                        swal({
                            title: "Unsuccessful!",
                            text: "Sorry, We couldn't setup your address!",
                            type: "error",
                            icon: "danger",
                            button: "Ok!"
                        });
                        break;
                }


            },
            error: function (e) {
                swal({
                    title: "Unsuccessful!",
                    text: "Sorry, We couldn't setup your address!",
                    type: "error",
                    icon: "danger",
                    button: "Ok!"
                });

                $("#btnSave").prop("disabled", false);

            }

        });
        modal.hide();
    });

    $('#socialSetup').submit(function (e) {
        //stop submit the form, we will post it manually.
        e.preventDefault();

        var facebook = $('#fb').val();
        var twitter = $('#twitter').val();
        var google = $('#google').val();
        var linkedIn = $('#lkn').val();
        var instag = $('#instag').val();
        var longitude = $('#longitude').val();
        var latitude = $('#latitude').val();
        var modal = $('#socialProfile');

        //String fb,String tw,String google,String instag,String linkIn ,String 
        var url = "/add-social?fb=" + facebook + "&tw=" + twitter + "&google=" + google + "&linkIn=" + linkedIn + "&instag=" + instag + "&longitude=" + longitude + "&latitude=" + latitude;

        // disabled the submit button
        $("#btnSave").prop("disabled", true);

        $.ajax({
            type: "POST",
            url: url,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            success: function (data) {
                modal.hide();
                switch (data) {

                    case "INVALID-STAFF":
                        swal({
                            title: "Unsuccessful!",
                            text: "Sorry, Invalid Staff!",
                            type: "error",
                            icon: "danger",
                            button: "Ok!"
                        });
                        break;

                    case "SUCCESS":
                        swal({
                            title: "Success!",
                            text: "Your address setup is successfully",
                            type: "success",
                            icon: "success",
                            button: "Ok!"
                        })
                            .then((value) => {
                                $("#btnSave").prop("disabled", false);
                                location.reload();
                            });
                        break;

                    case "FAILED":
                        swal({
                            title: "Unsuccessful!",
                            text: "Sorry, We couldn't setup your address!",
                            type: "error",
                            icon: "danger",
                            button: "Ok!"
                        });
                        break;
                }


            },
            error: function (e) {
                swal({
                    title: "Unsuccessful!",
                    text: "Sorry, We couldn't setup your address!",
                    type: "error",
                    icon: "danger",
                    button: "Ok!"
                });

                $("#btnSave").prop("disabled", false);

            }

        });

    });
</script>


<script>
    $('a.confirm-action').click(function (e) {
        e.preventDefault();
        var modal = $('#deleteConfirmModal');
        modal.data('url', $(this).attr('href'));
        modal.data('request_type', $(this).data('request-type'));
        modal.modal('show');
    });

    $('a.edit-action').click(function (e) {
        e.preventDefault();
        var modal = $('#profilename');
        modal.data('url', $(this).attr('href'));
        var url = modal.data('url');


        $.get(url, function (data, status) { //Declare a GET that takes in href

            $('#location').val(data.location);
            $('#address').val(data.address);
            $('#email').val(data.email);
            $('#telephone').val(data.phone);

            $('#addressId').val(data.id);
        });
        modal.data('request_type', $(this).data('request-type'));
        modal.modal('show');
    });

    $('#deleteConfirm').click(function () {

        var modal = $('#deleteConfirmModal');
        var url = modal.data('url');
        var request_type = modal.data('request_type');


        $.get(url, function (data, status) { //Declare a GET that takes in href
            if (data) {
                swal({
                    title: "Success!",
                    text: "Your address deleted successfully",
                    type: "success",
                    icon: "success",
                    button: "Ok!"
                })
                    .then((value) => {
                        location.reload();
                    });
            } else {
                swal({
                    title: "Unsuccessful!",
                    text: "Sorry, We couldn't delete your address!",
                    type: "error",
                    icon: "danger",
                    button: "Ok!"
                });
            }
        });


        modal.modal('hide');
    });
</script>
</body>
</html>
