<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Jobs, L'aine Jogs" name="keywords"/>
    <meta content="Synergy OSL" name="author"/>
    <meta content="" name="robots"/>
    <meta content="xjobs -  Job Portal" name="description"/>
    <meta content="xjobs -  Job Portal" property="og:title"/>
    <meta content="xjobs -  Job Portal" property="og:description"/>
    <meta content="xjobs -  Job Portal" property="og:image"/>
    <meta content="telephone=no" name="format-detection">

    <!-- FAVICONS ICON -->
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon"/>

    <!-- PAGE TITLE HERE -->
    <title>Advert | xjobs </title>

    <!-- MOBILE SPECIFIC -->
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Styles -->
    <link href="/https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/job/bootstrap-grid.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/icons.css" rel="stylesheet">
    <link href="/css/job/animate.min.css" rel="stylesheet">
    <link href="/css/job/style.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/responsive.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/chosen.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/colors/colors.css" rel="stylesheet" type="text/css"/>


    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link class="skin" href="/css/dropzone.css" rel="stylesheet" type="text/css"/>
    <link class="skin" href="/css/sweet-alert.min.css" rel="stylesheet" type="text/css"/>
    <!-- Optional theme -->
    <style>

        .dropzone {
            border: 2px dashed #dedede;
            border-radius: 5px;
            background: #f5f5f5;
        }

        .dropzone i {
            font-size: 5rem;
        }

        .dropzone .dz-message {
            color: rgba(0, 0, 0, .54);
            font-weight: 500;
            font-size: initial;
            text-transform: uppercase;
        }

        .my-tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        img {
            border: 1px solid #ddd; /* Gray border */
            border-radius: 4px; /* Rounded border */
            padding: 5px; /* Some padding */
            width: 150px; /* Set a small width */
        }

        /* Add a hover effect (blue shadow) */
        img:hover {
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

    </style>
</head>
<body>

<div class="page-loading">
    <img alt="" src="/images/loader.jpg"/>
    <span>Skip Loader</span>
</div>

<div class="theme-layout" id="scrollup">

    <div th:insert="menu :: header"></div>

    <section class="overlape">
        <div class="block no-padding">
            <div class="parallax scrolly-invisible no-parallax" data-velocity="-.1"
                 style="background: url(/images/bnr1.jpg) repeat scroll 50% 422.28px transparent;"></div>
            <!-- PARALLAX BACKGROUND IMAGE -->
            <div class="container fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="inner-header">
                            <h3 th:if="${user != null}" th:text="'Welcome ' + ${user.fullName}">Welcome </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="block no-padding">
            <div class="container">
                <div class="row no-gape">
                    <aside class="col-lg-3 column border-right">
                        <div class="widget">
                            <div class="tree_widget-sec">
                                <ul>

                                    <li><a href="/manage-jobs" title=""><i class="la la-file-text"></i> Manage Jobs</a>
                                    </li>
                                    <li><a href="/jobs" title=""><i class="la la-search"></i> Search Jobs</a></li>
                                    <li><a href="/rec-post-jobs" title="Post a New Job"><i class="la la-briefcase"></i>Post
                                        a New Job</a></li>
                                    <li><a href="/posted-jobs" title="All Posted Jobs"><i class="la la-money"></i>
                                        Posted Jobs</a></li>
                                    <li><a href="/users" title="All Users"><i class="la la-users activ"></i> System
                                        Users</a></li>
                                    <li><a href="/assigned-posted-jobs" title="Jobs assigned to recruiters "><i
                                            class="la la-paper-plane"></i>Assigned jobs </a></li>
                                    <li><a href="/filled-jobs" title=""><i class="la la-user"></i>Filled jobs</a></li>
                                    <li><a href="/job-alert-list" title=""><i class="la la-flash"></i>Job Alerts </a>
                                    </li>
                                    <li><a href="/rec-profile"><i class="la la-user-o"></i> Profile</a></li>
                                    <li><a href="/assigned-posted-jobs"><i class="la la-briefcase"></i> Recruiter
                                        Assigned Jobs</a></li>
                                    <li><a href="/resume-request-ls"><i class="la la-bell-o"></i> Resume Request</a>
                                    </li>
                                    <li><a href="/setup-address" title=""><i class="la la-book"></i>Setup-address</a>
                                    </li>
                                    <li><a href="/job-categories" title=""><i class="lab la-squarespace"></i>Job
                                        Category</a></li>
                                    <li><a href="/work-shop" title=""><i class="las la-universal-access"></i>Career
                                        Workshop</a></li>
                                    <li><a href="/change-password" title=""><i class="la la-lock"></i>Change
                                        Password</a></li>
                                    <li><a href="/logout" title="logout of the system"><i class="la la-unlink"></i>Logout</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </aside>
                    <div class="col-lg-9 column">
                        <div class="padding-left">
                            <div class="manage-jobs-sec">
                                <h3>Adverts</h3>
                                <a class="btn btn-success btn-sm advertBtn pull-right" data-target="#signupModal"
                                   data-toggle="modal" rel="tooltip"
                                   style="color:white" title="Add Advert">Add Advert
                                    <i class="fa fa-plus"></i>
                                </a>
                                <table>
                                    <thead>
                                    <tr>
                                        <td>Client</td>
                                        <td>Pic</td>
                                        <td>Page Loc</td>
                                        <td class="disabled-sorting text-center">Actions</td>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="country: ${list}">
                                        <td>
                                            Name: [(${country.client})] <br/>
                                            Url: <a style="color:blue" target="_blank"
                                                    th:href="${country.externalLink}">[(${country.externalLink})]</a>

                                        </td>
                                        <td>
                                            <img alt="" class="thumbnail lozad"
                                                 th:data-src="@{'/uploads/' + ${country.fileName}}">
                                        </td>
                                        <td th:if="country" th:text="${country.pageLocation}"></td>

                                        <td class="td-actions text-right" th:if="country">

                                            <a class="btn btn-info btn-sm edit-action"
                                               rel="tooltip"
                                               th:href="@{/findAdvert/{id}(id=${country.id})}" title="Edit User">
                                                <i class="fa fa-pencil"></i>

                                            </a>

                                            <a class="btn btn-danger btn-sm confirm-action"
                                               data-request-type="delete"
                                               th:href="@{/deleteAdvert/{id}(id=${country.id})}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </td>

                                    </tr>


                                    </tbody>
                                </table>


                            </div>
                        </div>

                    </div>
                    <div class="col-lg-9 column">

                        <br/><br/><br/>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer" style="margin-top:40px">
        <div th:insert="footer-1 :: footer"></div>

    </footer>

</div>


<div aria-hidden="true" aria-labelledby="ProfilenameModalLongTitle" class="modal fade browse-job modal-bx-info editor"
     id="deleteConfirmModal"
     role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="deleteLabel">Deleting Advert</h4>
            </div>
            <div class="modal-body">
                <p>You have selected to delete this advert.</p>
                <p>
                    If this was the action that you wanted to do,
                    please confirm your choice, or cancel and return to the page.

                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" data-dismiss="modal" type="button">Cancel</button>
                <button class="btn btn-danger" id="deleteConfirm" type="button">Delete Advert</button>
            </div>
        </div>
    </div>
</div>
<div aria-hidden="true" aria-labelledby="ProfilenameModalLongTitle" class="modal fade browse-job modal-bx-info editor"
     id="advertDlg"
     role="dialog" tabindex="-1">

    <div class="modal-dialog" role="document">

        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="ProfilenameModalLongTitle">Adverts Details</h5>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/advert-upload"
                      class="dropzone"
                      id="my-awesome-dropzone">
                </form>
                <form id="frm" method="post">
                    <div class="form-group">
                        <input class="form-control" id="title" name="title" placeholder="Client" type="text">
                        <input id="catId" name="catId" type="hidden" value="0">
                    </div>

                    <div class="form-group">
                        <input class="form-control" id="externalUrl" name="externalUrl" placeholder="URL" type="text">
                    </div>


                    <div class="form-group">
                        <select class="form-control" id="category" name="category" required
                                title="Position of the advert on the page">
                            <option value="Horizontal">Horizontal</option>
                            <option value="Vertical 1">Vertical 1</option>
                            <option value="Vertical 2">Vertical 2</option>
                            <option value="Vertical 3">Vertical 3</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <textarea class="form-control" id="message" name="message" placeholder="Your Message"
                                  rows="5"></textarea>
                    </div>
                    <button class="btn btn-danger" data-dismiss="modal" type="reset">Cancel</button>
                    <button class="btn btn-primary" id="btnSav" type="submit">Save</button>
                </form>

            </div>
            <div class="modal-footer">

            </div>

        </div>

    </div>

</div>
<div th:insert="passwordChange :: passwordChange"></div>


<script src="/js/job/jquery.min.js" type="text/javascript"></script>
<script data-cfasync="false" src="/css/job/email-decode.min.js"></script>
<script src="/js/job/modernizr.js" type="text/javascript"></script>
<script src="/js/job/cript.js" type="text/javascript"></script>
<script src="/js/job/bootstrap.min.js" type="text/javascript"></script>
<script src="/js/job/wow.min.js" type="text/javascript"></script>
<script src="/js/job/slick.min.js" type="text/javascript"></script>
<script src="/js/job/parallax.js" type="text/javascript"></script>
<script src="/js/job/select-chosen.js" type="text/javascript"></script>
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script src="/js/job/jquery.scrollbar.min.js" type="text/javascript"></script>
<script src="/js/sweetAlert.js"></script>
<script src="/js/job/dropzone.js?v=6"></script>
<script src="/js/dropzone-amd-module.js"></script>

<script>
    function clearText() {
        $('#catId').val(0);
        $('#title').val("");
        $('#message').val("");
        $('#category').val("");
    }

    $(function () {
        $('.lozad').Lazy();


        //Delete confirm and delete
        $('a.confirm-action').click(function (e) {
            e.preventDefault();
            var modal = $('#deleteConfirmModal');
            modal.data('url', $(this).attr('href'));
            modal.data('request_type', $(this).data('request-type'));
            modal.modal('show');
        });
        $('#deleteConfirm').click(function () {

            var modal = $('#deleteConfirmModal');
            var url = modal.data('url');

            $.get(url, function (assessment, status) { //Declare a GET that takes in href
                swal({
                    title: "Success!",
                    text: "Advert deleted successfully!",
                    type: "success",
                    icon: "success",
                    button: "Ok!"
                })
                    .then((value) => {
                        $("#btnSave").prop("disabled", false);
                        location.reload();
                    });
                modal.modal('hide');
            });

            modal.modal('hide');


        });

        //Edit Dialog
        $('a.edit-action').click(function (e) {
            e.preventDefault();
            var modal = $('#advertDlg');
            modal.data('url', $(this).attr('href'));
            var href = modal.data('url');

            //{"id":null,"client":null,"message":null,"entryDate":null,"status":null,"pageLocation":null,"uploadedFile":null,"fileName":null,"fileType":null,"externalLink":null}
            $.get(href, function (user, status) { //Declare a GET that takes in href

                $('#catId').val(user.id);
                $('#title').val(user.client);
                $('#message').val(user.message);
                $('#category').val(user.pageLocation);

            });
            modal.modal('show');
        });

        //Add Advert
        $('a.advertBtn').click(function (e) {
            e.preventDefault();
            clearText();
            var modal = $('#advertDlg');
            modal.data('url', $(this).attr('href'));
            modal.data('request_type', $(this).data('request-type'));
            modal.modal('show');
        });

        $('#frm').submit(function (e) {

            e.preventDefault();


            var modal = $('#advertDlg');
            var title = $('#title').val();
            var message = $('#message').val();
            var catId = parseInt($('#catId').val());
            var category = $("#category option:selected").val();

            var externalUrl = $('#externalUrl').val();

            // client, message, loc,String catId 
            var url = "/add-adverts?client=" + title + "&message=" + message + "&loc=" + category + "&catId=" + catId + "&extUrl=" + externalUrl;
            // disabled the submit button
            $("#btnSav").prop("disabled", true);

            $.ajax({
                type: "POST",
                url: url,
                processData: false,
                contentType: false,
                cache: false,
                timeout: 600000,

                success: function (data) {
                    switch (data) {
                        case "ALREADY-EXIST":
                            swal({
                                title: "Unsuccessful!",
                                text: "Horizontal Advert already exist!",
                                type: "error",
                                icon: "danger",
                                button: "Ok!"
                            });
                            break;
                        case "FAILED":
                            swal({
                                title: "Unsuccessful!",
                                text: "Sorry, We couldn't add your Adverts!",
                                type: "error",
                                icon: "danger",
                                button: "Ok!"
                            });
                            break;
                        case "SUCCESS":
                            swal({
                                title: "Success!",
                                text: "Adverts added successfully!",
                                type: "success",
                                icon: "success",
                                button: "Ok!"
                            })
                                .then((value) => {
                                    $("#btnSav").prop("disabled", false);
                                    location.reload();
                                });
                            break;
                    }

                },
                error: function (e) {
                    swal({
                        title: "Unsuccessful!",
                        text: "Sorry, We couldn't add your Adverts!",
                        type: "error",
                        icon: "danger",
                        button: "Ok!"
                    });

                    $("#btnSav").prop("disabled", false);

                }

            });

            modal.modal('hide');
        });
    });//Document.ready
</script>


</body>
</html>

