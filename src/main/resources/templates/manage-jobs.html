<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Jobs, L'aine Jogs" name="keywords"/>
    <meta content="Synergy OSL" name="author"/>
    <meta content="" name="robots"/>
    <meta content="xjobs -  Job Portal" name="description"/>
    <meta content="xjobs -  Job Portal" property="og:title"/>
    <meta content="xjobs -  Job Portal" property="og:description"/>
    <meta content="xjobs -  Job Portal" property="og:image"/>
    <meta content="telephone=no" name="format-detection">

    <!-- FAVICONS ICON -->
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon"/>

    <!-- PAGE TITLE HERE -->
    <title>Manage Jobs | xjobs </title>

    <!-- MOBILE SPECIFIC -->
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Styles -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" rel="stylesheet">
    <link href="/css/job/bootstrap-grid.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/icons.css" rel="stylesheet">
    <link href="/css/job/animate.min.css" rel="stylesheet">
    <link href="/css/job/style.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/responsive.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/chosen.css" rel="stylesheet" type="text/css"/>
    <link href="/css/job/colors/colors.css" rel="stylesheet" type="text/css"/>


    <link href="js/job/sweetalert.css" rel="stylesheet" type="text/css"/>
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">
    <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css"
          rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.2/css/fontawesome.min.css"
          integrity="sha384-X8QTME3FCg1DLb58++lPvsjbQoCT9bp3MsUU3grbIny/3ZwUJkRNO8NPW6zqzuW9" rel="stylesheet">

    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/rowreorder/1.2.7/css/rowReorder.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.dataTables.min.css" rel="stylesheet">

    <style>

        #main .section-data-tables .dataTables_wrapper table.dataTable {
            width: 100% !important;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable thead th {
            min-width: 69px;

            color: #616161;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable thead th.background-image-none {
            background-image: none !important;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable thead th.select-all {
            background-image: none !important;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable th,
        #main .section-data-tables .dataTables_wrapper table.dataTable td {
            font-weight: 300;

            white-space: nowrap;

            border-bottom: 1px solid #cfd8dc;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable th {
            padding: 17px 14px;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable tbody {
            overflow: auto;

            max-width: 100%;

        }

        #main .section-data-tables .dataTables_wrapper table.dataTable tbody th,
        #main .section-data-tables .dataTables_wrapper table.dataTable tbody td {
            white-space: nowrap;

            border: none !important;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable tbody td:not(:first-child) {
            padding: 8px 14px;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable tbody tr td:before,
        #main .section-data-tables .dataTables_wrapper table.dataTable tbody tr th:before {
            font-size: .9rem;
            line-height: 14px;

            top: 10px;

            width: 12px;
            height: 12px;

            text-indent: 0;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable tfoot th,
        #main .section-data-tables .dataTables_wrapper table.dataTable tfoot td {
            font-weight: 300;

            white-space: nowrap;

            border-top: 1px solid #cfd8dc;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.stripe tbody tr,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr {
            height: auto;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.stripe tbody tr .odd,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr .odd {
            background-color: #f4f5f7;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.stripe tbody tr .odd > .sorting_1,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr .odd > .sorting_1 {
            background-color: transparent;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.stripe tbody tr .odd.selected,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr .odd.selected {
            background-color: #acbad4 !important;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.stripe tbody tr .odd.selected th,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr .odd.selected th {
            border-radius: 0;
        }

        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr.hover > .sorting_1,
        #main .section-data-tables .dataTables_wrapper table.dataTable.display tbody tr:hover > .sorting_1,
        #main .section-data-tables .dataTables_wrapper table.dataTable.order-column.hover tbody tr.hover > .sorting_1,
        #main .section-data-tables .dataTables_wrapper table.dataTable.order-column.hover tbody tr:hover > .sorting_1 {
            background-color: transparent;
        }

        #main .section-data-tables .dataTables_wrapper table [type='checkbox'] + span:not(.lever):before,
        #main .section-data-tables .dataTables_wrapper table [type='checkbox']:not(.filled-in) + span:not(.lever):after {
            opacity: .5;
            border-radius: 4px !important;
        }

        #page-length-option_length {
            width: 100%;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_length#page-length-option_length,
        #main .section-data-tables .dataTables_wrapper .dataTables_filter#page-length-option_filter {
            display: block;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_length#page-length-option_length label select,
        #main .section-data-tables .dataTables_wrapper .dataTables_filter#page-length-option_filter label select {
            display: inline-block;
            height: auto;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_length#page-length-option_length label input,
        #main .section-data-tables .dataTables_wrapper .dataTables_filter#page-length-option_filter label input {
            width: auto;
            height: auto;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_length,
        .dataTables_filter {
            display: block;
            float: right;
            text-align: right;
            width: 50% !important;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_info {
            margin-left: 18px;
            color: #616161;

        }

        #main .section-data-tables .dataTables_wrapper .dataTables_paginate,
        #main .section-data-tables .dataTables_wrapper #page-length-option_paginate {
            margin-right: .35rem;
            margin-bottom: .75rem;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_paginate .paginate_button,
        #main .section-data-tables .dataTables_wrapper #page-length-option_paginate .paginate_button {
            margin-top: .25rem;
            padding: .25em .65em;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_paginate .paginate_button.current,
        #main .section-data-tables .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover,
        #main .section-data-tables .dataTables_wrapper #page-length-option_paginate .paginate_button.current,
        #main .section-data-tables .dataTables_wrapper #page-length-option_paginate .paginate_button.current:hover {
            color: #fff !important;
            border: 1px solid #3f51b5;
            border-radius: 6px;
            background: #3f51b5;
            box-shadow: 0 0 8px 0 #3f51b5;
        }

        #main .section-data-tables .dataTables_wrapper .dataTables_paginate .paginate_button:hover,
        #main .section-data-tables .dataTables_wrapper #page-length-option_paginate .paginate_button:hover {
            color: #fff !important;
            border: 1px solid #3f51b5;
            border-radius: 6px;
            background: #3f51b5;
            box-shadow: 0 0 8px 0 #3f51b5;
        }


        .material-datatables {
            margin: 20px

        }

        .date-div {
            margin: 20px;
        }

        .date-div input {
            height: 35px;
        }

        #example input {
            border-radius: 15px;
            margin: 20px;
        }

        .my-scrollbar {
            overflow: scroll;
            height: 232px;
            overflow-x: hidden;
            overflow-y: auto;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        /* Track */
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: #888;
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>

</head>
<body>

<div class="page-loading">
    <img alt="" src="/images/loader.jpg"/>
    <span>Skip Loader</span>
</div>

<div class="theme-layout" id="scrollup">

    <div th:insert="menu-admin :: header"></div>

    <section class="overlape">
        <div class="block no-padding">
            <div class="parallax scrolly-invisible no-parallax lozad" data-src="/images/slide1.jpg"
                 data-velocity="-.1"
                 style="background:   repeat scroll 50% 422.28px transparent;"></div><!-- PARALLAX BACKGROUND IMAGE -->
            <div class="container fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="inner-header">
                            <h3 th:if="${user != null}" th:text="'Welcome ' + ${user.fullName}">Welcome </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="block no-padding">
            <div class="container">
                <div class="row no-gape">
                    <aside class="col-lg-2 column border-right">
                        <div class="widget">
                            <div class="tree_widget-sec" id="menus">
                                Menus Here
                            </div>
                        </div>
                    </aside>
                    <div class="col-lg-10 column">
                        <div class="padding-left">
                            <div class="manage-jobs-sec">
                                <h3>Manage Jobs</h3>

                                <div class="date-div" style="margin-top: 100px">
                                    <form action="/manage-jobs">

                                        <input name="st" required th:value="${st}" type="date"/>
                                        <input name="ed" required th:value="${ed}" type="date"/>
                                        <input class="btn btn-primary round-box" type="submit" value="Go"/>
                                    </form>
                                </div>

                                <div id="main">
                                    <div class="material-datatables section-data-tables">


                                        <table class="table table-responsive table-hover "
                                               id="page-length-option_paginat"
                                               style="width: 100%">
                                            <thead>
                                            <tr>
                                                <td>Title</td>
                                                <td>Applications</td>
                                                <td>Published Date</td>
                                                <td>Expiry Date</td>
                                                <td>Status</td>
                                                <td>Action</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr style="width: 100%" th:each="country: ${joblist}">
                                                <td>
                                                    <div class="table-list-title">
                                                        <h3><a href="#"
                                                               th:href="@{/recruiter/job-details/{transactionId}(transactionId=${country.transactionId})}"
                                                               title="">[(${country.profession})]</a></h3>
                                                        <span><i class="la la-map-marker"></i> [(${country.location})], [(${country.country})]</span>
                                                        <span><i class="la la-calendar"></i> Posted Date: [(${country.postedDate})]</span>
                                                    </div>
                                                </td>
                                                <td class="application text-primary" th:if="${country.jobseekers}">
                                                    <a href="javascript:void(0);"
                                                       th:href="@{/applied-applicants/{transactionId}(transactionId=${country.transactionId})}"><i
                                                            class="fa fa-user"></i>
                                                        [(${country.jobseekers.size()})] Applied</a>
                                                    <br/><a href="javascript:void(0);"
                                                            id="shortlist"
                                                            th:href="@{/shortlisted-candidate/{transactionId}(transactionId=${country.transactionId})}"><i
                                                        class="la la-user"></i> View
                                                    Shortlisted</a>
                                                </td>

                                                <td th:text="${#dates.format(country.publishedDate, 'dd-MM-yyyy')}"></td>
                                                <td th:text="${#dates.format(country.expireDate, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <span class="status active">Active</span>
                                                </td>
                                                <td>
                                                    <ul class="action_job">
                                                        <li><span>View Job</span><a href="#"
                                                                                    th:href="@{/recruiter/job-details/{transactionId}(transactionId=${country.transactionId})}"
                                                                                    title=""><i
                                                                class="la la-eye"></i></a></li>
                                                        <li><span>Shortlist Candidates</span>
                                                            <a th:href="@{/recruiter/search-cv(q=${country.transactionId})}"
                                                               title=""><i class="la la-users"></i>
                                                            </a>
                                                        </li>
                                                        <li th:if="${country.published}"><span>Unpublish</span>
                                                            <a class="unpublish" href="#" style="color:red"
                                                               th:href="@{/publish-jobs/{id}/{pu} (id=${country.id},pu=2)}"
                                                               title=""><i
                                                                    class="la la-bell-slash"></i></a>
                                                        </li>
                                                        <li th:if="${not country.published}"><span>Publish</span>
                                                            <a class="publish" href="#" style="color:green"
                                                               th:href="@{/publish-jobs/{id}/{pu} (id=${country.id},pu=1)}"
                                                               title=""><i
                                                                    class="la la-bell"></i></a>
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div th:insert="pagination :: paginationbar"></div>


                            </div>
                        </div>

                    </div>
                    <div class="col-lg-9 column">

                        <br/><br/><br/>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer" style="margin-top:40px">
        <div th:insert="footer-1 :: footer"></div>

    </footer>

</div>


<script src="/js/job/jquery.min.js" type="text/javascript"></script>
<script data-cfasync="false" src="css/job/email-decode.min.js"></script>
<script src="/js/job/modernizr.js" type="text/javascript"></script>
<script src="/js/job/cript.js" type="text/javascript"></script>
<script src="/js/job/bootstrap.min.js" type="text/javascript"></script>
<script src="/js/job/wow.min.js" type="text/javascript"></script>
<script src="/js/job/slick.min.js" type="text/javascript"></script>
<script src="/js/job/parallax.js" type="text/javascript"></script>
<script src="/js/job/select-chosen.js" type="text/javascript"></script>
<script src="/js/jquery.lazy.min.js" type="text/javascript"></script>
<script src="/js/job/jquery.scrollbar.min.js" type="text/javascript"></script>
<script src="/js/menus.js"></script>
<script src="/js/job/load-cart.js"></script>
<script src="/js/job/sweetalert.js" type="text/javascript"></script>

<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>

<script>


    $(document).ready(function () {
        rerender();
        var table = $('#page-length-option_paginat').DataTable({
            "pagingType": "full_numbers",
            "paging": false,
            "info": false,
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            select: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search records",
            },
            dom: 'Bfrtip',
            buttons: [
                'csv', 'excel', 'pdf', 'print'
            ]
        });


        $("a.publish").on("click", function (e) {
            e.preventDefault();
            var url = $(this).attr("href");

            swal({
                    title: "Are you sure?",
                    text: "This job will be available to job seekers!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Yes, publish it!",
                    cancelButtonText: "No, cancel plx!",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $.get(url, function (del) {
                            if (del) {
                                swal("Publish!", "Your job has been published.", "success");
                                //table.$('tr.selected').remove().draw(false);
                            } else {
                                swal("Error", "Sorry we couldn't publish your job :)", "error");
                            }
                        });
                    } else {
                        swal("Cancelled", "Your job is safe :)", "error");
                    }
                });

        });

        $("a.unpublish").on("click", function (e) {
            e.preventDefault();
            var url = $(this).attr("href");

            swal({
                    title: "Are you sure?",
                    text: "This job will no longer be available to job seekers!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Yes, unpublish it!",
                    cancelButtonText: "No, cancel plx!",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $.get(url, function (del) {
                            if (del) {
                                swal("Publish!", "Your job has been unpublished.", "success");
                                //table.$('tr.selected').remove().draw(false);
                            } else {
                                swal("Error", "Sorry we couldn't unpublish your job :)", "error");
                            }
                        });
                    } else {
                        swal("Cancelled", "Your job is safe :)", "error");
                    }
                });

        });


        $("a.publish2").on("click", function (e) {
            e.preventDefault();
            var url = $(this).attr("href");

            swal({
                title: "Are you sure you wan to unpublish the job?",
                icon: 'warning',
                dangerMode: true,
                buttons: {
                    cancel: 'No, Please!',
                    delete: 'Yes, Delete It'
                }
            }).then(function (willDelete) {
                if (willDelete) {

                    $.get(url, function (data) {
                        if (data) {
                            swal("Poof! Job has been unpublished!", {icon: "success"});
                        } else {
                            swal("Sorry! Job could not be unpublished!", {icon: "error"});
                        }
                    });


                } else {
                    swal("Your Job is safe", {
                        title: 'Cancelled',
                        icon: "error",
                    });
                }
            });
        });

    });

    function findShortlisted(val) {
        var url = "/findShortlisted/" + val;
        var shortlist = 0;
        $.get(url, function (data) {
            shortlist = data;
        });
        return shortlist;
    }
</script>
</body>
</html>

